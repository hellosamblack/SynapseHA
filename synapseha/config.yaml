# SynapseHA Add-on Configuration
name: "SynapseHA MCP"
version: "1.0.0"
slug: "synapseha"
description: "The complete SynapseHA MCP server for Home Assistant. Provides 21+ tools for LLM-driven control, maintenance, and smart home intelligence."
url: https://github.com/hellosamblack/SynapseHA

# Supported architectures (i386 removed - Node.js 20 dropped 32-bit x86 Linux support)
arch:
  - aarch64
  - amd64
  - armv7

# Startup configuration
startup: application
boot: auto

# Use S6-Overlay init system for proper process and signal handling
init: true

# Network ports
ports:
  3000/tcp: 3000
ports_description:
  3000/tcp: HTTP/SSE Server Port (Used by Antigravity/Claude)

# Ingress is disabled as this is an API-only service
ingress: false

# Home Assistant API access - auto-injects SUPERVISOR_TOKEN
homeassistant_api: true
hassio_api: true
hassio_role: default
auth_api: true

# Persistent storage
map:
  - addon_config:rw
  - ssl:ro

# User-configurable options
options:
  log_level: info
  http_port: 3000
  bearer_token: ""
  require_auth: false
  cache_refresh_interval: 60
  entity_cache_enabled: true

# Schema validation
schema:
  log_level: list(debug|info|warn|error)
  http_port: port
  bearer_token: str
  require_auth: bool
  cache_refresh_interval: int(30,3600)
  entity_cache_enabled: bool

# Environment variables
environment:
  NODE_ENV: production

# Add-on privileges
privileged: []
host_network: false
host_pid: false

# Watchdog for auto-restart
watchdog: "http://localhost:3000/health"
